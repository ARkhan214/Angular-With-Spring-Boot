<div class="transaction-container p-4 border rounded shadow-sm bg-white">

  <h2 class="mb-4">New Transaction</h2>

  <!-- Transaction Form -->
  <form [formGroup]="transactionForm" (ngSubmit)="onSubmit()">

    <!-- Transaction Type -->
    <div class="mb-3">
      <label for="type" class="form-label">Transaction Type</label>
      <select id="type" class="form-select" formControlName="type">
        <option value="">-- Select Type --</option>
        <option [value]="transactionType.DEPOSIT">Deposit</option>
        <option [value]="transactionType.WITHDRAW">Withdraw</option>
        <option [value]="transactionType.TRANSFER">Transfer</option>
      </select>
    </div>

    <!-- Amount -->
    <div class="mb-3">
      <label for="amount" class="form-label">Amount</label>
      <input type="number" id="amount" class="form-control" formControlName="amount" placeholder="Enter amount">
    </div>

    <!-- Description -->
    <div class="mb-3">
      <label for="description" class="form-label">Description</label>
      <textarea id="description" class="form-control" rows="2" formControlName="description" placeholder="Optional note..."></textarea>
    </div>

    <!-- Receiver ID (only for transfer) -->
    <div class="mb-3" *ngIf="transactionForm.get('type')?.value === transactionType.TRANSFER">
      <label for="receiverId" class="form-label">Receiver Account ID</label>
      <input type="number" id="receiverId" class="form-control" formControlName="receiverId" placeholder="Enter receiver account ID">
    </div>

    <!-- Receiver Account Info -->
    <div *ngIf="transactionForm.get('type')?.value === transactionType.TRANSFER">
      <div *ngIf="loadingReceiver" class="alert alert-info">
        Loading receiver account...
      </div>

      <div *ngIf="receiverAccount" class="card mt-3 shadow-sm">
        <div class="card-body">
          <h5 class="card-title">Receiver Account Details</h5>
          <div class="d-flex align-items-center mb-3">
            <img *ngIf="receiverAccount.photo" [src]="'http://localhost:8085/images/account/' + receiverAccount.photo" alt="Photo" class="rounded-circle me-3" width="60" height="60">
            <div>
              <p class="mb-0"><strong>Name:</strong> {{ receiverAccount.name }}</p>
              <p class="mb-0"><strong>Balance:</strong> {{ receiverAccount.balance | currency:'BDT' }}</p>
              <p class="mb-0"><strong>Account Type:</strong> {{ receiverAccount.accountType }}</p>
              <p class="mb-0">
                <strong>Status:</strong>
                <span class="badge" [ngClass]="receiverAccount.accountActiveStatus ? 'bg-success' : 'bg-danger'">
                  {{ receiverAccount.accountActiveStatus ? 'Active' : 'Closed' }}
                </span>
              </p>
            </div>
          </div>

          <p><strong>NID:</strong> {{ receiverAccount.nid }}</p>
          <p><strong>Phone:</strong> {{ receiverAccount.phoneNumber }}</p>
          <p><strong>Address:</strong> {{ receiverAccount.address }}</p>
          <p><strong>DOB:</strong> {{ receiverAccount.dateOfBirth | date }}</p>
          <p><strong>Opened:</strong> {{ receiverAccount.accountOpeningDate | date }}</p>
          <p *ngIf="receiverAccount.accountClosingDate"><strong>Closed:</strong> {{ receiverAccount.accountClosingDate | date }}</p>
          <p><strong>Role:</strong> {{ receiverAccount.role }}</p>
        </div>
      </div>
    </div>

    <!-- Submit Button -->
    <button type="submit" class="btn btn-primary mt-3 w-100" [disabled]="transactionForm.invalid">
      Submit Transaction
    </button>

        <button type="reset" class="btn btn-primary mt-3 w-100" (click)="resetForm()">
      Reset
    </button>
  </form>
</div>
